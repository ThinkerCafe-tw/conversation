# Task ID: 7
# Title: å¯¦ç¾æ‘˜è¦ç™¼é€åŠŸèƒ½
# Status: pending
# Dependencies: 2, 6
# Priority: medium
# Description: é–‹ç™¼æ‘˜è¦ç™¼é€æ¨¡çµ„ï¼Œå°‡ AI ç”Ÿæˆçš„æ‘˜è¦æ–‡æœ¬ä»¥å…¬é–‹è¨Šæ¯çš„å½¢å¼ç™¼é€å›åŸæœ¬çš„ LINE ç¾¤çµ„
# Details:
1. ä½¿ç”¨ LINE Messaging API çš„ pushMessage æ–¹æ³•ç™¼é€æ‘˜è¦
2. è¨­è¨ˆæ‘˜è¦æ¶ˆæ¯çš„æ ¼å¼ï¼ŒåŒ…æ‹¬æ¨™é¡Œã€æ™‚é–“ç¯„åœå’Œå…§å®¹
3. å¯¦ç¾éŒ¯èª¤è™•ç†å’Œé‡è©¦æ©Ÿåˆ¶ï¼Œè™•ç†æ¶ˆæ¯ç™¼é€å¤±æ•—çš„æƒ…æ³
4. æ·»åŠ æ¶ˆæ¯ç™¼é€è¨˜éŒ„ï¼Œç”¨æ–¼ç›£æ§å’Œèª¿è©¦

ä»£ç¢¼ç¤ºä¾‹ï¼š
```typescript
import { Client } from '@line/bot-sdk';

const client = new Client({
  channelAccessToken: process.env.LINE_CHANNEL_ACCESS_TOKEN!,
  channelSecret: process.env.LINE_CHANNEL_SECRET!
});

async function sendSummary(groupId: string, summary: string): Promise<void> {
  try {
    const now = new Date();
    const oneHourAgo = new Date(now.getTime() - 60 * 60 * 1000);
    
    const timeRangeText = `${oneHourAgo.getHours()}:00 - ${now.getHours()}:00`;
    const messageText = `ğŸ“‹ éå»ä¸€å°æ™‚ (${timeRangeText}) çš„å°è©±æ‘˜è¦ï¼š\n\n${summary}`;
    
    await client.pushMessage(groupId, {
      type: 'text',
      text: messageText
    });
    
    console.log(`Summary sent to group ${groupId}`);
  } catch (error) {
    console.error(`Error sending summary to group ${groupId}:`, error);
    
    // å¦‚æœæ˜¯å¯é‡è©¦çš„éŒ¯èª¤ï¼Œæ·»åŠ åˆ°é‡è©¦éšŠåˆ—
    if (isRetryableError(error)) {
      await enqueueRetry('send-summary', { groupId, summary });
    }
    
    throw error;
  }
}

function isRetryableError(error: any): boolean {
  // åˆ¤æ–·éŒ¯èª¤æ˜¯å¦å¯é‡è©¦
  return error.statusCode >= 500 || error.code === 'ETIMEDOUT';
}
```

# Test Strategy:
1. å–®å…ƒæ¸¬è©¦ï¼šç¢ºä¿æ¶ˆæ¯æ ¼å¼æ­£ç¢º
2. é›†æˆæ¸¬è©¦ï¼šç¢ºèªèˆ‡ LINE API çš„é›†æˆæ­£å¸¸å·¥ä½œ
3. ç«¯åˆ°ç«¯æ¸¬è©¦ï¼šåœ¨æ¸¬è©¦ç¾¤çµ„ä¸­é©—è­‰æ‘˜è¦ç™¼é€
4. éŒ¯èª¤è™•ç†æ¸¬è©¦ï¼šæ¨¡æ“¬æ¶ˆæ¯ç™¼é€å¤±æ•—å ´æ™¯ï¼Œç¢ºä¿é‡è©¦æ©Ÿåˆ¶æ­£å¸¸å·¥ä½œ
5. ç”¨æˆ¶é«”é©—æ¸¬è©¦ï¼šè©•ä¼°æ‘˜è¦åœ¨ä¸åŒè¨­å‚™ä¸Šçš„é¡¯ç¤ºæ•ˆæœ
